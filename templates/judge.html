<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Family Feud - Judge</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js" integrity="" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/static/styles.css">
  </head>
  <body>
  <div class="container">
    <div class="header">
      <div class="title">Family Feud</div>
    </div>

    <div class="teams-section">
      <div class="team-box" id="team1Box">
        <div class="team-name" id="team1Name">Team 1</div>
        <div class="team-score" id="team1Score">0</div>
        <div class="team-indicator">● PLAYING ●</div>
      </div>
      <div class="team-box" id="team2Box">
        <div class="team-name" id="team2Name">Team 2</div>
        <div class="team-score" id="team2Score">0</div>
        <div class="team-indicator">● PLAYING ●</div>
      </div>
    </div>

    <div class="question">
      <div class="question-text" id="question">Loading...</div>
      <div class="question-counter" id="questionCounter"></div>
    </div>
    <div id="answers"></div>
    <button id="reset">Reset</button>

    <script>
      // page-level render function used by /static/app.js
      window.renderState = function (state) {
        document.getElementById('question').innerText = state.question || '';
        const container = document.getElementById('answers');
        container.innerHTML = '';
        (state.answers || []).forEach(a => {
          const div = document.createElement('div');
          div.className = 'answer' + (a.revealed ? ' revealed' : '');
          div.innerText = `${a.id}. ${a.text} — ${a.points}`;
          div.onclick = () => selectAnswer(a.id);
          container.appendChild(div);
        });
      };

      async function selectAnswer(id) {
        const res = await fetch('/api/select', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ id })
        });
        if (!res.ok) alert('Error selecting answer');
      }

      document.getElementById('reset').onclick = async () => {
        await fetch('/api/reset', { method: 'POST' });
      };
    </script>
    <script src="/static/app.js"></script>
  </body>
  </html>
